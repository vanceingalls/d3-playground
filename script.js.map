{"version":3,"sources":["script.coffee"],"names":[],"mappings":"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","file":"script.js","sourceRoot":"/source/","sourcesContent":["d3.json 'data.json', (data) ->\n  # assuming data all in the same month\n  # and starts on the first\n  new TripCalendar data, d3.select('.block .table')\n\nclass TripCalendar\n  constructor: (@data, @container=d3.select('body')) ->\n    bbox = @container.node().getBoundingClientRect()\n    @boxDimension = bbox.width / 7\n    @circleR = @boxDimension / 2\n    @buildTable()\n    @populateTable()\n\n  buildTable: ->\n    table = @container.insert('table')\n    tbody = table.append('tbody')\n\n    @buildRow tbody for i in [1..5]\n\n  buildRow: (container) ->\n    tr = container.append('tr')\n    tr.append 'td' for i in [1..7]\n\n  populateTable: ->\n    self = @\n\n    td = d3.selectAll 'td'\n    .filter (d, i) -> i > 0\n    .data @data\n    .attr 'class', (d) ->\n      return 'safe' if d.miles_driven < 40\n      return 'danger' if d.miles_driven > 70\n      return 'warning'\n    .text (d) -> d.date.split('/')[1]\n\n    .on 'mouseenter', ->\n      td = d3.select @\n      td.select 'svg text'\n        .classed 'hidden', false\n    .on 'mouseleave', ->\n      td = d3.select @\n      td.select 'text'\n        .classed 'hidden', true\n    .on 'click', (d) ->\n      d3.select '.block .info'\n      .html ->\n        html = \"Trips for <strong>#{d.date}</strong>: <br><ul>\"\n        html += \"<li>time: #{segment.time} :: miles: #{segment.miles_driven}</li>\" for segment in d.trips\n        html += \"</ul>\"\n        return html\n\n    svg = td.append 'svg'\n\n    svg.append 'circle'\n      .attr 'r', (d) -> self.circleR * d.miles_driven / 100\n      .attr('cx', self.circleR)\n      .attr('cy', self.circleR)\n\n    svg.append 'text'\n      .attr 'dx', -6\n      .attr 'dy', self.circleR + 6\n      .html (d) -> d.miles_driven + ' miles'\n      .classed 'hidden', true\n\n\n\n"]}